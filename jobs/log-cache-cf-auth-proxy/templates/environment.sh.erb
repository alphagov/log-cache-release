<%
    gateway = link('log-cache-gateway')

    if addr = p('cc.override_hostname', false)
      cc_hostname = addr
    else
      cc_hostname = link('cloud_controller').address
    end
%>

# External ADDR is plaintext because it assumes go-router is doing SSL
# termination.
export CAPI_ADDR_EXTERNAL="<%= "http://#{cc_hostname}:9022" %>"
export CAPI_ADDR="<%= "https://#{cc_hostname}:9023" %>"
export CAPI_CERT_PATH="/var/vcap/jobs/log-cache-cf-auth-proxy/config/certs/cc.crt"
export CAPI_KEY_PATH="/var/vcap/jobs/log-cache-cf-auth-proxy/config/certs/cc.key"
export CAPI_CA_PATH="/var/vcap/jobs/log-cache-cf-auth-proxy/config/certs/cc_ca.crt"
export CAPI_COMMON_NAME="<%= p('cc.common_name') %>"

export UAA_CLIENT_ID="<%= p('uaa.client_id') %>"
export UAA_CLIENT_SECRET="<%= p('uaa.client_secret') %>"
export UAA_ADDR="<%= p('uaa.internal_addr') %>"
export UAA_CA_PATH="/var/vcap/jobs/log-cache-cf-auth-proxy/config/certs/uaa_ca.crt"

export SKIP_CERT_VERIFY="<%= p('skip_cert_verify') %>"

export LOG_CACHE_GATEWAY_ADDR="<%= "http://#{gateway.p('gateway_addr')}" %>"
export ADDR="<%= ":#{p('proxy_port')}" %>"
